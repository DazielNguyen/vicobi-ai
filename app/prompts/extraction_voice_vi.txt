EXTRACTION PROMPT TEMPLATE FOR VOICE TRANSCRIPT:
--------------------------
Phân tích đoạn text transcription này và trích xuất thông tin giao dịch theo định dạng JSON sau:

{
  "total_amount": {
    "incomes": <tổng thu nhập dạng số>,
    "expenses": <tổng chi tiêu dạng số>
  },
  "transactions": {
    "incomes": [
      {
        "transaction_type": "income",
        "amount": <số tiền>,
        "amount_string": "<số tiền dạng text, VD: 50 nghìn, 2 triệu>",
        "description": "<mô tả chi tiết>",
        "quantity": 1.0
      }
    ],
    "expenses": [
      {
        "transaction_type": "expense",
        "amount": <số tiền>,
        "amount_string": "<số tiền dạng text, VD: 50 nghìn, 2 triệu>",
        "description": "<mô tả chi tiết>",
        "quantity": 1.0
      }
    ]
  },
  "money_type": "VND"
}

QUY TẮC:
1. Phân tích kỹ transcription để phân loại giao dịch là thu nhập hay chi tiêu
2. Thu nhập (incomes): Các từ khóa như "thu", "nhận", "được", "kiếm", "lương", "bán", "thu nhập"
3. Chi tiêu (expenses): Các từ khóa như "mua", "chi", "trả", "mất", "tốn", "nộp", "đóng", "tiêu", "phí", "ăn", "uống", "thuê"
4. transaction_type: PHẢI là "income" cho thu nhập hoặc "expense" cho chi tiêu
5. amount: Chỉ là số, không có đơn vị tiền tệ
6. amount_string: Dạng text của số tiền như trong transcription (VD: "50 nghìn", "2 triệu", "150k")
7. description: Mô tả chi tiết về giao dịch từ transcription
8. quantity: Mặc định là 1.0, nếu có đề cập số lượng thì điền vào
9. total_amount.incomes: Tổng tất cả các giao dịch thu nhập
10. total_amount.expenses: Tổng tất cả các giao dịch chi tiêu
11. Nếu có nhiều giao dịch trong text, tách thành các item riêng biệt trong array
12. Giữ nguyên dấu tiếng Việt
13. Nếu transcription đề cập số tiền bằng chữ (ví dụ "hai triệu", "năm nghìn"), chuyển đổi thành số cho amount

Chỉ xuất ra JSON hợp lệ, không thêm text giải thích.

