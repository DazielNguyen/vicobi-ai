EXTRACTION PROMPT TEMPLATE FOR VOICE TRANSCRIPT:
--------------------------
Phân tích đoạn text transcription này và trích xuất thông tin giao dịch theo định dạng JSON sau:

{
  "total_amount": {
    "incomes": <tổng thu nhập dạng số>,
    "expenses": <tổng chi tiêu dạng số>
  },
  "transactions": {
    "incomes": [
      {
        "amount": <số tiền>,
        "description": "<mô tả chi tiết>",
        "quantity": 1.0
      }
    ],
    "expenses": [
      {
        "amount": <số tiền>,
        "description": "<mô tả chi tiết>",
        "quantity": 1.0
      }
    ]
  },
  "money_type": "VND"
}

QUY TẮC:
1. Phân tích kỹ transcription để phân loại giao dịch là thu nhập hay chi tiêu
2. Thu nhập (incomes): Các từ khóa như "thu", "nhận", "được", "kiếm", "lương", "bán", "thu nhập"
3. Chi tiêu (expenses): Các từ khóa như "mua", "chi", "trả", "mất", "tốn", "nộp", "đóng", "tiêu", "phí", "ăn", "uống", "thuê"
4. transaction_type: PHẢI là "income" cho thu nhập hoặc "expense" cho chi tiêu
5. amount: Chỉ là số, không có đơn vị tiền tệ
6. description: Mô tả chi tiết về giao dịch từ transcription
7. quantity: Mặc định là 1.0, nếu có đề cập số lượng thì điền vào
8. total_amount.incomes: Tổng tất cả các giao dịch thu nhập
9. total_amount.expenses: Tổng tất cả các giao dịch chi tiêu
10. Nếu có nhiều giao dịch trong text, tách thành các item riêng biệt trong array
11. Giữ nguyên dấu tiếng Việt
12. Nếu transcription đề cập số tiền bằng chữ (ví dụ "hai triệu", "năm nghìn"), chuyển đổi thành số cho amount
13. TỰ ĐỘNG CHỈNH SỬA CHÍNH TẢ VÀ CHUẨN HÓA:
    - Sửa các lỗi chính tả tiếng Việt phổ biến (VD: "mua" thay vì "mua", "trả" thay vì "tra")
    - Sửa các từ thiếu dấu hoặc sai dấu thanh (VD: "tien" → "tiền", "cafe" → "cà phê")
    - Chuẩn hóa chữ hoa/thường: Chữ cái đầu câu viết hoa, còn lại viết thường
    - Viết hoa tên riêng, địa danh (VD: "Hà Nội", "Việt Nam", "Grab", "Shopee")
    - Không viết HOA toàn bộ từ trừ khi là từ viết tắt (VD: "VND", "ATM", "BHXH")
    - Chuẩn hóa khoảng trắng: Loại bỏ khoảng trắng thừa, thêm khoảng trắng thiếu

Chỉ xuất ra JSON hợp lệ, không thêm text giải thích.

